<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Firebase Console Display</title>
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script> -->
    <!-- Add Firebase products that you want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script> -->
    <link rel="stylesheet" href="/src/output.css" />
  </head>

  <body>
    <!-- <div id="time" class="p-4 bg-blue-100 shadow-lg rounded-md mx-4 my-4">
      <h3 class="text-xl font-semibold mb-2 text-center text-blue-800">
        Datetime
      </h3>
      <div class="flex justify-evenly">
        <p id="start" class="text-gray-700"></p>
        <p id="end" class="text-gray-700"></p>
      </div>
    </div> -->

    <!-- <div class="flex flex-wrap justify-around lg:flex-nowrap">
      <div
        id="distance"
        class="p-4 bg-green-100 shadow-lg rounded-md mx-4 my-4 w-full lg:w-1/3"
      >
        <h2 class="text-2xl font-bold mb-4 text-green-800">
          Log Distance Path Model
        </h2>
        <div class="flex justify-between">
          <div class="">
            <h3 class="text-xl font-semibold text-green-700">Router 1</h3>
            <p id="router-1-ssid-log" class="text-gray-700"></p>
            <p id="router-1-rssi-log" class="text-gray-700"></p>
            <p id="router-1-distance-log" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-green-700">Router 2</h3>
            <p id="router-2-ssid-log" class="text-gray-700"></p>
            <p id="router-2-rssi-log" class="text-gray-700"></p>
            <p id="router-2-distance-log" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-green-700">Router 3</h3>
          </div>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-green-700 mt-4">Distance</h3>
        <p id="distance-a-b-log" class="text-gray-700"></p>
        <p id="distance-c-b" class="text-gray-700"></p>
        <p id="distance-a-c" class="text-gray-700"></p>
      </div>

      <div
        id="distance"
        class="p-4 bg-yellow-100 shadow-lg rounded-md mx-4 my-4 w-full lg:w-1/3"
      >
        <h2 class="text-2xl font-bold mb-4 text-yellow-800">
          ITU Indoor Propagation Model
        </h2>
        <div class="flex justify-between">
          <div class="">
            <h3 class="text-xl font-semibold text-yellow-700">Router 1</h3>
            <p id="router-1-ssid-ITU" class="text-gray-700"></p>
            <p id="router-1-rssi-ITU" class="text-gray-700"></p>
            <p id="router-1-distance-ITU" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-yellow-700">Router 2</h3>
            <p id="router-2-ssid-ITU" class="text-gray-700"></p>
            <p id="router-2-rssi-ITU" class="text-gray-700"></p>
            <p id="router-2-distance-ITU" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-yellow-700">Router 3</h3>
          </div>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-yellow-700 mt-4">
          Distance
        </h3>
        <p id="distance-a-b-ITU" class="text-gray-700"></p>
        <p id="distance-c-b" class="text-gray-700"></p>
        <p id="distance-a-c" class="text-gray-700"></p>
      </div>

      <div
        id="distance"
        class="p-4 bg-red-100 shadow-lg rounded-md mx-4 my-4 w-full lg:w-1/3"
      >
        <h2 class="text-2xl font-bold mb-4 text-red-800">
          Free-space Path Loss
        </h2>
        <div class="flex justify-between">
          <div class="">
            <h3 class="text-xl font-semibold text-red-700">Router 1</h3>
            <p id="router-1-ssid-FSPL" class="text-gray-700"></p>
            <p id="router-1-rssi-FSPL" class="text-gray-700"></p>
            <p id="router-1-distance-FSPL" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-red-700">Router 2</h3>
            <p id="router-2-ssid-FSPL" class="text-gray-700"></p>
            <p id="router-2-rssi-FSPL" class="text-gray-700"></p>
            <p id="router-2-distance-FSPL" class="text-gray-700"></p>
          </div>
          <div class="">
            <h3 class="text-xl font-semibold text-red-700">Router 3</h3>
          </div>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-red-700 mt-4">Distance</h3>
        <p id="distance-a-b-FSPL" class="text-gray-700"></p>
        <p id="distance-c-b" class="text-gray-700"></p>
        <p id="distance-a-c" class="text-gray-700"></p>
      </div>
    </div> -->

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCFhkQgV566VA1QjexbaCsAJ8iCfQXpW0g",
        authDomain: "esp8266-t1-37f02.firebaseapp.com",
        databaseURL:
          "https://esp8266-t1-37f02-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "esp8266-t1-37f02",
        storageBucket: "esp8266-t1-37f02.appspot.com",
        messagingSenderId: "201166852539",
        appId: "1:201166852539:web:42c3ad90a0611b17d5b49e",
      };

      firebase.initializeApp(firebaseConfig);
      var database = firebase.database();
      // Function to retrieve and display data
      function fetchData() {
        var data = database.ref("Data");
        data.on(
          "value",
          function (snapshot) {
            var data = snapshot.val();
            console.log("Data from Firebase:", data);

            var start = data.Datetime.start,
              end = data.Datetime.end,
              ssid_1 = data.Router1.ssid,
              rssi_1 = data.Router1.rssi,
              ssid_2 = data.Router2.ssid,
              rssi_2 = data.Router2.rssi,
              // log
              distance_1_Log = data.Router1.Log.distance,
              distance_2_Log = data.Router2.Log.distance,
              distanceA_B_Log = data.DistanceA_B.distanceA_B_Log,
              // ITU
              distance_1_ITU = data.Router1.ITU.distance,
              distance_2_ITU = data.Router2.ITU.distance,
              distanceA_B_ITU = data.DistanceA_B.distanceA_B_ITU;

            document.getElementById("start").innerHTML = "Start: " + start;
            document.getElementById("end").innerHTML = "End: " + end;
            // log
            document.getElementById("router-1-ssid-log").innerHTML =
              "SSID: " + ssid_1;
            document.getElementById("router-1-rssi-log").innerHTML =
              "RSSI: " + rssi_1 + " dBm";
            document.getElementById("router-1-distance-log").innerHTML =
              "Distance: " + distance_1_Log + " m";
            document.getElementById("router-2-ssid-log").innerHTML =
              "SSID: " + ssid_2;
            document.getElementById("router-2-rssi-log").innerHTML =
              "RSSI: " + rssi_2 + " dBm";
            document.getElementById("router-2-distance-log").innerHTML =
              "Distance: " + distance_2_Log + " m";
            document.getElementById("distance-a-b-log").innerHTML =
              "Distance A between Distance B using log: " +
              distanceA_B_Log +
              " m";
            // ITU
            document.getElementById("router-1-ssid-ITU").innerHTML =
              "SSID: " + ssid_1;
            document.getElementById("router-1-rssi-ITU").innerHTML =
              "RSSI: " + rssi_1 + " dBm";
            document.getElementById("router-1-distance-ITU").innerHTML =
              "Distance: " + distance_1_ITU + " m";
            document.getElementById("router-2-ssid-ITU").innerHTML =
              "SSID: " + ssid_2;
            document.getElementById("router-2-rssi-ITU").innerHTML =
              "RSSI: " + rssi_2 + " dBm";
            document.getElementById("router-2-distance-ITU").innerHTML =
              "Distance: " + distance_2_ITU + " m";
            document.getElementById("distance-a-b-ITU").innerHTML =
              "Distance A between Distance B using ITU: " +
              distanceA_B_ITU +
              " m";
          },
          function (error) {
            console.log("Error: " + error.code);
          }
        );

        historyRef.on(
          "value",
          function (snapshot) {
            var historyData = snapshot.val();
            console.log("History from Firebase:", historyData);
            document.getElementById("history-data").innerHTML = JSON.stringify(
              historyData,
              null,
              2
            );
          },
          function (error) {
            console.log("Error: " + error.code);
          }
        );
      }

      // Fetch data on load
      window.onload = fetchData;
    </script>
  </body>
</html>
